"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),_wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_contact=require("./../components/contact.js"),_contact2=_interopRequireDefault(_contact),_test=require("./../mixins/test.js"),_test2=_interopRequireDefault(_test),_config=require("./../config/config.js"),_config2=_interopRequireDefault(_config),Index=function(t){function e(){var t,a,n,o;_classCallCheck(this,e);for(var i=arguments.length,s=Array(i),r=0;r<i;r++)s[r]=arguments[r];return a=n=_possibleConstructorReturn(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),_initialiseProps.call(n),o=a,_possibleConstructorReturn(n,o)}return _inherits(e,t),_createClass(e,[{key:"getClassList",value:function(){var t=this;return _wepy2.default.request({url:_config2.default.focusList,data:{page:this.page},header:{Authorization:""+this.$parent.globalData.token}}).then(function(e){var a=e.data.data.list;a.length&&a.forEach(function(t){t.match_time_minute=t.match_time&&t.match_time.slice(10,16)}),t.matchList=t.matchList.concat(e.data.data.list),t.page++,t.$apply()})}},{key:"onLoad",value:function(){this.getClassList()}},{key:"onPullDownRefresh",value:function(){this.page=1,this.matchList=[],this.getClassList().then(function(t){wx.stopPullDownRefresh()})}},{key:"onReachBottom",value:function(){var t=this;this.isUpFrash=!0,this.getClassList().then(function(e){t.isUpFrash=!1,t.$apply()}),console.log("上拉触底了")}},{key:"onShareAppMessage",value:function(){return console.log(2),{title:this.shareContent,path:"/pages/index",imageUrl:"/images/share_img.jpg",success:function(t){},fail:function(t){}}}}]),e}(_wepy2.default.page),_initialiseProps=function(){var t=this;this.config={navigationBarTitleText:"关注",navigationBarBackgroundColor:"#ffffff",navigationBarTextStyle:"black"},this.components={contact:_contact2.default},this.mixins=[_test2.default],this.data={indicatorDots:!0,autoplay:!0,interval:5e3,duration:1e3,banners:[],classList:[],gameList:[1,2,3,4,5,6,7,8,9,20,33,3,3,3,3,3],isUpFrash:!1,shareContent:"时间看得见福克斯",isScGame:!0,totalFocus:0,page:1,matchList:[]},this.computed={},this.methods={gotoIndex:function(){wx.navigateTo({url:"/pages/index"})},gotoResult:function(){wx.navigateTo({url:"/pages/result"})},gotoFeture:function(){wx.navigateTo({url:"/pages/feature"})},gotoFocus:function(){wx.navigateTo({url:"/pages/focus"})},openMini1:function(){wx.navigateToMiniProgram({appId:"wxe0a4c5b9f85f9cf5",path:"pages/index",extraData:{foo:"bar"},envVersion:"release",success:function(t){}})},openMini2:function(){wx.navigateToMiniProgram({appId:"wx0c2d51b7b4337c3a",path:"pages/index",extraData:{foo:"bar"},envVersion:"release",success:function(t){}})},formSubmit:function(t){console.log(t.detail.formId),console.log("form发生了submit事件，携带数据为：",t.detail.value)},setShareContent:function(t){1==t.status||2==t.status||3==t.status||4==t.status?this.shareContent="进行中："+t.league_name+"  "+t.home+"  "+t.home_score+"-"+t.away_score+" "+t.away:-1==t.status?this.shareContent=t.league_name+" "+t.match_time.slice(0,t.match_time.length-3)+" "+t.home+"  "+t.home_score+"-"+t.away_score+" "+t.away:0==t.status?this.shareContent=t.league_name+" "+t.match_time.slice(0,t.match_time.length-3)+" "+t.home+" vs "+t.away:-10==t.status?this.shareContent="比赛取消："+t.league_name+" "+t.match_time.slice(0,t.match_time.length-3)+" "+t.home+" vs "+t.away:-11==t.status?this.shareContent="比赛待定："+t.league_name+" "+t.match_time.slice(0,t.match_time.length-3)+" "+t.home+" vs "+t.away:-12==t.status?this.shareContent="比赛腰斩："+t.league_name+" "+t.match_time.slice(0,t.match_time.length-3)+" "+t.home+" vs "+t.away:-13==t.status?this.shareContent="比赛中断："+t.league_name+" "+t.match_time.slice(0,t.match_time.length-3)+" "+t.home+" vs "+t.away:-14==t.status&&(this.shareContent="比赛推迟："+t.league_name+" "+t.match_time.slice(0,t.match_time.length-3)+" "+t.home+" vs "+t.away)},collect:function(t,e){var a=this;this.matchList[t].is_collect?(wx.showLoading({title:"取消中"}),_wepy2.default.request({url:_config2.default.matchCollect,method:"DELETE",data:{match_id:e},header:{Authorization:""+this.$parent.globalData.token}}).then(function(e){wx.hideLoading(),a.matchList.splice(t,1),a.totalFocus--,a.$apply(),console.log("取消收藏成功")})):(wx.showLoading({title:"关注中"}),_wepy2.default.request({url:_config2.default.matchCollect,method:"POST",data:{match_id:e},header:{Authorization:""+this.$parent.globalData.token}}).then(function(e){wx.hideLoading(),a.matchList[t].is_collect=!0,a.totalFocus++,a.$apply(),console.log("收藏成功")}))}},this.events={"index-emit":function(){var e,a=(e=arguments.length-1,arguments.length<=e?void 0:arguments[e]);console.log(t.$name+" receive "+a.name+" from "+a.source.$name)}}};exports.default=Index;